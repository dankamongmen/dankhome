#!/bin/sh

set -e || exit 1

usage () { echo "usage: `basename $0` outputdir" ; }
usageerr () { usage >&2 ; exit 1 ; }

FB=fbcmd
PAR=parallel # from Debian's moreutils

[ $# -eq 1 ] || usageerr

OUTDIR="$1"

FRIENDS=`$FB friends | sed -e '1d' | cut -d\  -f1`
echo "Found `echo $FRIENDS | wc -w` friends"
echo "$FRIENDS" | xargs $PAR $FB -auto_mkdir=1 OPICS "$i" "$1" -of='[oname]/[aid]-[pid].jpg' -ppsize=1 --
for i in $FRIENDS ; do
	echo "Acquiring pictures for $i..."
done
